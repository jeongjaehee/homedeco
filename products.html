<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/default.css" />
    <link rel="stylesheet" href="css/header.css" />
    <style>
      .col-sm-4 {
        position: relative;
      }
      .btn.buy {
        position: absolute;
        bottom: 75px;
        right: 24px;
        position: absolute;
        display: block;
        width: 40px;
        height: 40px;
        background: url(/assets/cart.svg) no-repeat center center;
        background-size: 70%;
        color: transparent;
        background-color: #fff;
        border-radius: 100%;
      }
      #cardsection {
        margin: 20px 0;
      }
      .col-sm-4 {
        margin: 10px 0;
      }
      .col-sm-4 h5 {
        margin: 10px 0;
      }
      .productsMenu ul {
        width: 800px;
        margin: 40px auto;
        display: flex;
        flex-direction: row;
        align-items: center;
        font-weight: bolder;
        font-size: 24px;
        color: #3b3b3b;
      }
      .productsMenu ul li {
        text-align: center;
        flex: 5;
      }
      .productsMenu ul > li:hover > a {
        color: gray;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <a href="#"
          >홈데코
          <!--시각장애인을위해 백그라운드에는 설명을 써줄수 없어 로고이름씀-->
        </a>
      </h1>

      <h2 class="hide">소메뉴 2종류</h2>
      <!--메뉴 앞에 캡션달기 for시각장애인-->
      <nav class="lnb">
        <ul>
          <li>
            <a href="#"><span>About</span></a>
          </li>
          <li>
            <a href="#"><span>Products</span></a>
          </li>
        </ul>
        <!--스팬을 넣으므로 글자크기만큼만 활용가능함-->
      </nav>
      <input
        id="input"
        placeholder="입력 후 엔터를 입력하세요"
        type="text"
        onchange="myFunction()"
      />
      <h2 class="hide">대메뉴 햄버거</h2>
      <nav class="spot">
        <a href="#" class="menu_bar"></a>
        <div class="navi_wrap">
          <ul class="navi">
            <a href="#" class="menu_closebar"></a>
            <li>
              <a href="#">제품정보</a>
              <ul class="submenu">
                <li><a href="#">벽면재</a></li>
                <li><a href="#">도어재</a></li>
                <li><a href="#">몰딩재</a></li>
                <li><a href="#">시트재</a></li>
                <li><a href="#">가구재</a></li>
              </ul>
            </li>
            <li>
              <a href="#">시공사례</a>
              <ul class="submenu">
                <li><a href="#">테마 갤러리</a></li>
                <li><a href="#">시공 갤러리</a></li>
                <li><a href="#">전시장 갤러리</a></li>
              </ul>
            </li>
            <li>
              <a href="#">고객센터</a>
              <ul class="submenu">
                <li><a href="#">고객상담</a></li>
                <li><a href="#">매장 찾기</a></li>
                <li><a href="#">FAQ</a></li>
                <li><a href="#">공지</a></li>
                <li><a href="#">뉴스</a></li>
                <li><a href="#">자료실</a></li>
              </ul>
            </li>
            <li>
              <a href="#">기업소개</a>
              <ul class="submenu">
                <li><a href="#">회사개요</a></li>
                <li><a href="#">투자정보</a></li>
                <li><a href="#">인사제도</a></li>
                <li><a href="#">채용공고</a></li>
                <li><a href="#">네트워크</a></li>
                <li><a href="#">통합브랜드</a></li>
              </ul>
            </li>
            <li>
              <a href="#">사업분야</a>
              <ul class="submenu">
                <li><a href="#">가구 컴포넌트</a></li>
                <li><a href="#">인테리어 자재</a></li>
                <li><a href="#">인테리어 플랫폼</a></li>
                <li><a href="#">연관사</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </nav>
      <div class="loginCart">
        <a href="#">Login</a>
        <a href="#" class="baguni"
          >Cart<span>0</span>
          <p class="cartcontent"></p
        ></a>
      </div>
    </header>
    <section class="products" style="width: 1280px; margin: 20px auto">
      <div class="productsMenu">
        <ul>
          <li><a href="#">벽면재</a></li>
          <li><a href="#">도어재</a></li>
          <li><a href="#">몰딩재</a></li>
          <li><a href="#">시트재</a></li>
          <li><a href="#">가구재</a></li>
        </ul>
      </div>
      <h6>#더보기와 장바구니버튼을 입력해보세요</h6>
      <div class="container">
        <div class="row" id="cardsection"></div>
      </div>
      <div class="container">
        <button class="btn btn-danger" id="more">더보기</button>
      </div>
    </section>
    <script src="javascript/jquery-1.12.3.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script>
      var products = [
        { id: 0, price: 70000, title: "Blossom Dress" },
        { id: 1, price: 50000, title: "Springfield Shirt" },
        { id: 2, price: 60000, title: "Black Monastery" },
      ];
      function templates(name) {
        name.forEach((a, i) => {
          var 템플릿 = `<div class="col-sm-4">
            <img src="https://via.placeholder.com/600" class="w-100">
            <h5>${name[i].title}</h5>
            <p>가격 : ${name[i].price}</p>
            <button class="btn buy">cart</button>
          </div>
          `;
          $(".row").append(템플릿);
        });
      }
      templates(products);

      var click = 0;
      $("#more").click(function () {
        click++;
        if (click == 1) {
          $.get(
            "https://raw.githubusercontent.com/jeongjaehee/simpleJson1/main/simple1.json"
          ).done((a) => {
            var data = JSON.parse(a);
            templates(data);
            buy();
          });
        }
        if (click == 2) {
          $.get(
            "https://raw.githubusercontent.com/jeongjaehee/simpleJson2/main/simple2.json"
          ).done((a) => {
            var data = JSON.parse(a);
            templates(data);
            buy();
            $("#more").remove();
          });
        }
      });
      var cart = [];
      var baguni = 0;
      function buy() {
        $(".buy").click(function (e) {
          var title1 = $(e.target).siblings("h5").text();
          let proIndex = cart.findIndex((a) => {
            return title1 == a.title;
          });
          if (proIndex == -1) {
            cart.push({ title: title1, count: 1 });
          } else {
            cart[proIndex].count++;
          }
          baguni++;
          console.log(baguni, "baguni");
          localStorage.setItem("cart", JSON.stringify(cart));

          console.log(cart);
          $(".baguni > span").text(baguni);
        });
      }
      buy();
      $(".baguni").hover(
        function () {
          $(".cartcontent").text(localStorage.getItem("cart"));
          $(".cartcontent").show();
        },
        function () {
          $(".cartcontent").hide();
        }
      );
    </script>
  </body>
</html>
